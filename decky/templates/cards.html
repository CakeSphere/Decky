{% extends "layout.html" %}
{% set active_page = "cards" %}
{% block title %}Cards{% endblock %}
{% block body %}
  <div class="container">
    <aside class="sidebar search-filters">
      <h3>Card Name</h3>
      <input class="block" {% if filter_name %} value="{{filter_name}}" {% endif %} type="text" placeholder="Search by card name&hellip;">
      <h3>Color</h3>
      <div class="active">
        <button class="btn u active">
          <span class="mana small su shadow">&nbsp;</span>
          Blue
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
        <button class="btn b active">
          <span class="mana small sb shadow">&nbsp;</span>
          Black
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
        <button class="btn g active">
          <span class="mana small sg shadow">&nbsp;</span>
          Green
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
      </div>
      <button class="btn w">
        <span class="mana small sw shadow">&nbsp;</span>
        White
      </button>
      <button class="btn r">
        <span class="mana small sr shadow">&nbsp;</span>
        Red
      </button>
      <button class="btn">
        <span class="mana small sc">&nbsp;</span>
        Colorless
      </button>
      <input type="checkbox" id="only-colors">
      <label for="only-colors">Only selected colors</label>
      <h3>Legal Format</h3>
      <div class="active">
        <button class="btn active">
          Modern
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
      </div>
      <button class="btn">Standard</button>
      <button class="btn">Legacy</button>
      <button class="btn">Vintage</button>
      <button class="btn">Commander</button>
      <button class="btn">Casual</button>
      <button class="btn">Other&hellip;</button>
      <h3>Set</h3>
      {% for set in sets %}
        {% if set.code == filter_set %}
        <div>
          <a href="/cards" class="btn active">
            <i class="ss ss-{{ set.code }} ss-common">&nbsp;</i>
            {{ set.name }}
              <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
          </a>
        </div>
        {% endif %}
      {% endfor %}
      {% for set in sets[:6] %}
        {% if set.code != filter_set %}
          {% if filter_type or filter_subtype or filter_name %}
            <a href="?{{query_string}}&set={{set.code}}" class="btn">
              <i class="ss ss-{{ set.code }} ss-common">&nbsp;</i>
              {{ set.name }}
            </a>
            {% else %}
            <a href="?set={{set.code}}" class="btn">
              <i class="ss ss-{{ set.code }} ss-common">&nbsp;</i>
              {{ set.name }}
            </a>
          {% endif %}
        {% endif %}
      {% endfor %}
      <button class="btn">
        Other&hellip;
      </button>
      <h3>Type</h3>
      {% for type in card_types %}
        {% if type == filter_type %}
        <div>
          <a href="/cards" class="btn active">
              {{ type }}
              <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
          </a>
        </div>
        {% endif %}
      {% endfor %}
      {% for type in card_types %}
        {% if type != filter_type %}
          <a href="?type={{type}}" class="btn">
            {{type}}
          </a>
        {% endif %}
      {% endfor %}
      <h3>Subtype</h3>
      {% if filter_subtype %}
      <div>
        <a href="/cards" class="btn active">
            {{ filter_subtype }}
            <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </a>
      </div>
      {% endif %}
      <a class="btn" href="?subtype=Eldrazi">Eldrazi</a>
      <a class="btn" href="?subtype=Vampire">Vampire</a>
      <a class="btn" href="?subtype=Ooze">Ooze</a>
      <a class="btn" href="?subtype=Shapeshifter">Shapeshifter</a>
      <a class="btn" href="?subtype=Wall">Wall</a>
      <a class="btn" href="?subtype=Wizard">Wizard</a>
      <button class="btn">
        Other&hellip;
      </button>
      <h3>Converted Mana Cost</h3>
      <input type="number" placeholder="From" aria-label="From">
      <input type="number" placeholder="To" aria-label="To">
      <h3>Power and Toughness</h3>
      <input type="number" placeholder="Power" aria-label="Power">
      <input type="number" placeholder="Toughness" aria-label="Toughness">
      <h3>Price</h3>
      <div class="input-group">
        <span class="input-group-addon">$</span>
        <input type="text" placeholder="From" aria-label="From">
      </div>
      <div class="input-group">
        <span class="input-group-addon">$</span>
        <input type="text" placeholder="To" aria-label="To">
      </div>
      <h3>Sort By</h3>
      <select class="btn">
        <option selected>Most Liked</option>
        <option>Most Recent</option>
        <option>Most Controversial</option>
      </select>
    </aside>
    {% if cards|length == 0 %}
      <section class="content no-results text-center">
        <h1>
          No suitable cards were found
          {% if filter_name %} for “<span class="primary">{{filter_name}}</span>.”{% endif %}
        </h1>
        <hr>
        <p class="lead">But not all is lost. Why not try another search?</p>
      </section>
      <div class="card-bg">
        <img src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=373629&type=card" alt="">
      </div>
    {% endif %}
    <section class="content grid-5">
      {% for card in cards %}
      <a class="card" href="{{ url_for('card', multiverseId=card.multiverseId)}}" title="{{card.name}}">
        <div class="grimoire-count">
          <svg class="icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 125" enable-background="new 0 0 100 100" xml:space="preserve"><path d="M53.7,76.6h36V16.3h2.7c2.3,0,4.2,1.9,4.2,4.2V80c0,2.3-1.9,4.2-4.2,4.2h-33c-0.6,2.5-2.9,4.4-5.7,4.4h-7.5   c-2.7,0-5-1.9-5.7-4.4h-33c-2.3,0-4.2-1.9-4.2-4.2V20.5c0-2.3,1.9-4.2,4.2-4.2h2.7v60.2h36H53.7z M25.6,24.4   c-1,0.3-1.5,1.4-1.1,2.4c0.3,0.8,1,1.2,1.7,1.2c0.2,0,0.4,0,0.6-0.1c4.5-1.5,9.2-1.6,13.6,0c1,0.3,2-0.2,2.3-1.2   c0.3-1-0.2-2-1.2-2.3C36.4,22.6,30.8,22.6,25.6,24.4z M41.6,32.5c-5.2-1.8-10.8-1.8-16,0.1c-1,0.3-1.5,1.4-1.1,2.4   c0.3,0.8,1,1.2,1.7,1.2c0.2,0,0.4,0,0.6-0.1c4.5-1.5,9.2-1.6,13.6,0c1,0.3,2-0.2,2.3-1.2C43.1,33.9,42.6,32.8,41.6,32.5z    M41.6,40.6c-5.2-1.8-10.8-1.8-16,0.1c-1,0.3-1.5,1.4-1.1,2.4c0.3,0.8,1,1.2,1.7,1.2c0.2,0,0.4,0,0.6-0.1c4.5-1.5,9.2-1.6,13.6,0   c1,0.3,2-0.2,2.3-1.2C43.1,42,42.6,40.9,41.6,40.6z M41.6,48.7c-5.2-1.8-10.8-1.8-16,0.1c-1,0.3-1.5,1.4-1.1,2.4   c0.3,0.8,1,1.2,1.7,1.2c0.2,0,0.4,0,0.6-0.1c4.5-1.5,9.2-1.6,13.6,0c1,0.3,2-0.2,2.3-1.2C43.1,50.1,42.6,49.1,41.6,48.7z    M41.6,56.8c-5.2-1.8-10.8-1.8-16,0.1c-1,0.3-1.5,1.4-1.1,2.4c0.3,0.8,1,1.2,1.7,1.2c0.2,0,0.4,0,0.6-0.1c4.5-1.5,9.2-1.6,13.6,0   c1,0.3,2-0.2,2.3-1.2C43.1,58.2,42.6,57.2,41.6,56.8z M53.1,19.7v46.2c4.4-1,8.8-1.5,13.3-1.5s9,0.5,13.3,1.5V19.7   c-0.9-0.2-1.8-0.4-2.7-0.6v-6.3c2.1,0.4,4.2,0.9,6.3,1.5l0.3,0.1c1.3,0.4,2.2,1.6,2.2,3v52.6c0,1-0.5,1.9-1.2,2.5   c-0.8,0.6-1.8,0.8-2.7,0.5l-0.2,0c-10-2.9-20.8-2.9-30.8,0l-0.2,0c0,0-0.1,0-0.1,0c-0.2,0-0.4,0.1-0.6,0.1c-0.1,0-0.1,0-0.2,0   c0,0-0.1,0-0.1,0c-0.1,0-0.1,0-0.2,0c-0.2,0-0.3,0-0.5-0.1c0,0-0.1,0-0.1,0l-0.2,0c-10-2.9-20.8-2.9-30.8,0l-0.2,0   c-0.3,0.1-0.6,0.1-0.9,0.1c-0.7,0-1.3-0.2-1.8-0.6c-0.8-0.6-1.2-1.5-1.2-2.5V17.3c0-1.4,0.9-2.6,2.2-3C27.2,11.1,39,11,50,14.1   c1.9-0.5,3.9-1,5.8-1.3v6.3C54.9,19.2,54,19.4,53.1,19.7z M46.9,19.7c-8.7-2.2-17.9-2.2-26.6,0v46.2c4.4-1,8.8-1.5,13.3-1.5   c4.5,0,9,0.5,13.3,1.5V19.7z M61.3,53.3l4.6-4.2c0.3-0.3,0.8-0.3,1.1,0l4.6,4.2c0.5,0.5,1.4,0.1,1.4-0.6V12.3   c0-0.3-0.2-0.6-0.6-0.6c-3.9-0.4-7.9-0.4-11.9,0c-0.3,0-0.6,0.3-0.6,0.6v40.3C59.9,53.4,60.8,53.7,61.3,53.3z"/></svg>
          <div class="grimoire-badge">4</div>
        </div>
        <div class="card-mana">
          {% if card_mana[card.id]|length > 0 %}
            {% for mana in card_mana[card.id].split(" ") %}
              <span class="mana small s{{mana.lower()}} shadow">{{mana}}</span>
            {% endfor %}
          {% endif %}
        </div>
        <div class="title">{{card.name}}</div>
        <div class="card-img">
          <img alt="{{card.name}}" src="https://img.scryfall.com/cards/art_crop/en/{{card.setCode|lower}}/{{card.number}}.jpg">
        </div>
        <div class="card-type">
          <div class="card-rarity">
            <i class="ss ss-{% if card.setCode.lower() == 'mps_akh' %}akh{% else %}{{card.setCode.lower()}}{% endif %} ss-{% if card.rarity.lower() == 'basic land' %}common{% else %}{{card.rarity.lower()}}{% endif %} {% if card.rarity != 'Common' and card.rarity != 'Basic Land' %}ss-grad{% endif %}">&nbsp;</i>
          </div>
          {{card.type}}
        </div>
        <div class="card-info">
          <div class="card-text">
            <p>
              {{card_text[card.id]}}
            </p>
          </div>
          <div class="card-flavor">
            <p>
              {{card.flavor}}
            </p>
          </div>
        </div>
        {% if card.power != ""%}
          <div class="power-toughness">
            {{card.power}} <em>/</em>
            {{card.toughness}}
          </div>
        {% endif %}
        {% if card.loyalty != ""%}
          <div class="loyalty">
            {{card.loyalty}}
          </div>
        {% endif %}
      </a>
      {% endfor %}
      <div class="pagination text-center">
        {%- for page in pagination.iter_pages() %}
          {% if page %}
            {% if pagination.pages != pagination.page and pagination.pages > 2 %}
              <a href="{{url_for_other_page(page)}}?{{query_string}}" class="last"><span class="text">{{page}}</span></a>
            {% endif %}
            {% if page == pagination.page %}
             <div class="current-page"><span class="text">{{page}}</span></div>
            {% endif %}
            {% if pagination.page > 2 %}
              <a href="{{url_for_other_page(1)}}?{{query_string}}" class="first"><span class="text">1</span></a>
            {% endif %}
            {% if pagination.page > 1 %}
              <a href="{{url_for_other_page(pagination.page - 1)}}?{{query_string}}" class="prev"><span class="text">{{pagination.page - 1}}</span></a>
            {% endif %}
          {% endif %}
        {%- endfor %}
        {% if pagination.has_next %}
          <a href="{{url_for_other_page(pagination.page+1)}}?{{query_string}}" class="next"><span class="text">{{pagination.page+1}}</span></a>
        {% endif%}
      </div>
    </section>
  </div>
{% endblock %}
