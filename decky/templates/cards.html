{% extends "layout.html" %}
{% set active_page = "cards" %}
{% block title %}Cards{% endblock %}
{% block body %}
  <div class="container">
    <aside class="sidebar search-filters">
      <h3>Card Name</h3>
      <input class="block" {% if filter_name %} value="{{filter_name}}" {% endif %} type="text" placeholder="Search by card name&hellip;">
      <h3>Color</h3>
      <div class="active">
        <button class="btn u active">
          <span class="mana small su shadow">&nbsp;</span>
          Blue
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
        <button class="btn b active">
          <span class="mana small sb shadow">&nbsp;</span>
          Black
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
        <button class="btn g active">
          <span class="mana small sg shadow">&nbsp;</span>
          Green
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
      </div>
      <button class="btn w">
        <span class="mana small sw shadow">&nbsp;</span>
        White
      </button>
      <button class="btn r">
        <span class="mana small sr shadow">&nbsp;</span>
        Red
      </button>
      <button class="btn">
        <span class="mana small sc">&nbsp;</span>
        Colorless
      </button>
      <input type="checkbox" id="only-colors">
      <label for="only-colors">Only selected colors</label>
      <h3>Legal Format</h3>
      <div class="active">
        <button class="btn active">
          Modern
          <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </button>
      </div>
      <button class="btn">Standard</button>
      <button class="btn">Legacy</button>
      <button class="btn">Vintage</button>
      <button class="btn">Commander</button>
      <button class="btn">Casual</button>
      <button class="btn">Other&hellip;</button>
      <h3>Set</h3>
      {% for set in sets %}
        {% if set.code == filter_set %}
        <a href="/cards" class="btn active">
          <i class="ss ss-{{ set.code }} ss-common">&nbsp;</i>
          {{ set.name }}
            <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </a>
        {% endif %}
      {% endfor %}
      {% for set in sets %}
        {% if set.code != filter_set %}
        <a href="?set={{set.code}}" class="btn">
          <i class="ss ss-{{ set.code }} ss-common">&nbsp;</i>
          {{ set.name }}
        </a>
        {% endif %}
      {% endfor %}
      <button class="btn">
        Other&hellip;
      </button>
      <h3>Type</h3>
      {% for type in card_types %}
        {% if type == filter_type %}
        <div>
          <a href="/cards" class="btn active">
              {{ type }}
              <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
          </a>
        </div>
        {% endif %}
      {% endfor %}
      {% for type in card_types %}
        {% if type != filter_type %}
          <a href="?type={{type}}" class="btn">
            {{type}}
          </a>
        {% endif %}
      {% endfor %}
      <h3>Subtype</h3>
      {% if filter_subtype %}
      <div>
        <a href="/cards" class="btn active">
            {{ filter_subtype }}
            <svg class="cancel" xmlns="http://www.w3.org/2000/svg"x="0px" y="0px" viewBox="0 0 823.93427 1029.8962375"><title>Cancel</title><path d="m 776.75678,0 c -12.064,0 -24.124,4.608 -33.345,13.828 L 411.94378,345.27301 80.52575,13.879 c -18.443,-18.441 -48.255,-18.441 -66.695,0 -18.441,18.44 -18.441,48.244 0,66.685 l 331.418,331.39601 -331.418,331.399 c -18.441,18.44 -18.441,48.25 0,66.691 9.198,9.198 21.272,13.817 33.347,13.817 12.073,0 24.15,-4.619 33.348,-13.817 l 331.41803,-331.398 331.468,331.445 c 9.197,9.198 21.271,13.82 33.345,13.82 12.074,0 24.101,-4.622 33.346,-13.82 18.442,-18.441 18.442,-48.247 0,-66.687 l -331.464,-331.446 331.464,-331.44501 c 18.442,-18.441 18.442,-48.25 0,-66.691 C 800.88178,4.608 788.81678,0 776.75678,0 Z"/></svg>
        </a>
      </div>
      {% endif %}
      <a class="btn" href="?subtype=Eldrazi">Eldrazi</a>
      <a class="btn" href="?subtype=Vampire">Vampire</a>
      <a class="btn" href="?subtype=Ooze">Ooze</a>
      <a class="btn" href="?subtype=Shapeshifter">Shapeshifter</a>
      <a class="btn" href="?subtype=Wall">Wall</a>
      <a class="btn" href="?subtype=Wizard">Wizard</a>
      <button class="btn">
        Other&hellip;
      </button>
      <h3>Converted Mana Cost</h3>
      <input type="number" placeholder="From" aria-label="From">
      <input type="number" placeholder="To" aria-label="To">
      <h3>Power and Toughness</h3>
      <input type="number" placeholder="Power" aria-label="Power">
      <input type="number" placeholder="Toughness" aria-label="Toughness">
      <h3>Price</h3>
      <div class="input-group">
        <span class="input-group-addon">$</span>
        <input type="text" placeholder="From" aria-label="From">
      </div>
      <div class="input-group">
        <span class="input-group-addon">$</span>
        <input type="text" placeholder="To" aria-label="To">
      </div>
      <h3>Sort By</h3>
      <select class="btn">
        <option selected>Most Liked</option>
        <option>Most Recent</option>
        <option>Most Controversial</option>
      </select>
    </aside>
    {% if cards|length == 0 %}
      <div class="card-bg">
        <img src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid=373629&type=card" alt="">
      </div>
      <section class="content no-results">
        <h1>No suitable cards were found.</h1>
        <p class="lead">But not all is lost. Why not try again?</p>
      </section>
    {% endif %}
    <section class="content grid-5">
      {% for card in cards %}
      <a class="card" href="{{ url_for('card', multiverseId=card.multiverseId)}}" title="{{card.name}}">
        <div class="card-mana">
          {% if card_mana[card.id]|length > 0 %}
            {% for mana in card_mana[card.id].split(" ") %}
              <span class="mana small s{{mana.lower()}} shadow">{{mana}}</span>
            {% endfor %}
          {% endif %}
        </div>
        <div class="title">{{card.name}}</div>
        <div class="card-img">
          <img alt="{{card.name}}" src="http://gatherer.wizards.com/Handlers/Image.ashx?multiverseid={{card.multiverseId}}&type=card">
        </div>
        <div class="card-type">
          <div class="card-rarity">
            <i class="ss ss-{{card.setCode.lower()}} ss-{{card.rarity.lower()}} {% if card.rarity != 'Common' %}ss-grad{% endif %}">&nbsp;</i>
          </div>
          {{card.type}}
        </div>
        <div class="card-info">
          <div class="card-text">
            <p>
              {{card_text[card.id]}}
            </p>
          </div>
          <div class="card-flavor">
            <p>
              {{card.flavor}}
            </p>
          </div>
        </div>
        {% if card.power != "" %}
          <div class="power-toughness">
            {{card.power}} <em>/</em>
            {{card.toughness}}
          </div>
        {% endif %}
      </a>
      {% endfor %}
      <div class="pagination text-center">
        {%- for page in pagination.iter_pages() %}
          {% if page %}
            {% if pagination.pages != pagination.page and pagination.pages > 2 %}
              <a href="{{url_for_other_page(page)}}?{{query_string}}" class="last"><span class="text">{{page}}</span></a>
            {% endif %}
            {% if page == pagination.page %}
             <div class="current-page"><span class="text">{{page}}</span></div>
            {% endif %}
            {% if pagination.page > 2 %}
              <a href="{{url_for_other_page(1)}}?{{query_string}}" class="first"><span class="text">1</span></a>
            {% endif %}
            {% if pagination.page > 1 %}
              <a href="{{url_for_other_page(pagination.page - 1)}}?{{query_string}}" class="prev"><span class="text">{{pagination.page - 1}}</span></a>
            {% endif %}
          {% endif %}
        {%- endfor %}
        {% if pagination.has_next %}
          <a href="{{url_for_other_page(pagination.page+1)}}?{{query_string}}" class="next"><span class="text">{{pagination.page+1}}</span></a>
        {% endif%}
      </div>
    </section>
  </div>
{% endblock %}
